## ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#  File:          [Qubes-GPG-Vault]:~/.gnupg/gpg.conf - TEMPLATE
#  Created:       2017-004-10 
#  Version:       V1.0 RC2  [Q1-2019]
#  Author:        Alisha Awen Sheppard - Siren1@disroot.org
#  Git Username:  harmonicalchemy
#  Ref:           https://www.gnupg.org/software/index.html
#  Repo:          GitHub.com:harmonicalchemy/dotfiles.git
#  Environment:   GnuPG Version 2 within a Qubes Split GPG Back End Vault VM...
#  Reference:     https://www.qubes-os.org/doc/split-gpg/ (instructions here)
#
#  This file configures the "back end" vault portion of the Qubes Split GPG
#  process which (unlike the App VM portion) runs on a network isolated
#  (air-gaped) Vault VM.
#
#  Although this file was tailor made for a Qubes OS based system, there is
#  nothing fancy about it.  This config file contains standard gpg configuration
#  directives read by the GPG configuration parser upon running of each command.
#  You may add any valid long option here on a blank line...  Command line
#  abbreviations or the leading dashes are not allowed within the config files...
#  Simply add your directive on a blank line like this with no leading dashes:
#
#         your-desired-gpg-directive directive-setting
# 
#  NOTE1: All options below are for GnuPG v2.1.11 and later and may not
#         work with earlier versions!
#
#  NOTE2: Although this file mirrors the default_gpg.conf in the top level
#         GnuPG folder within this repository I have removed all the
#         pedagogical notes showing GnuPG defaults, obsolete, and dangerous
#         settings.  This file contains only the directives needed to implement
#         Qubes Split GPG within a back end Vault VM...  The nice thing about
#         GPG2 is many of the security settings we used to have to do manually
#         within gpg.conf etc. are now the default state out of box! This reduces
#         the size of this config file considerably and saves you from having to
#         do that research and possibly make a mistake in your configuration!
#
#  Change Log: (descending chronological order)
#
#    2019-003-17 - Alisha Awen Sheppard - siren1@disroot.org
#      GnuPG V2.2 has been out for a while.  I am double checking all my
#      settings below to see if there are any new (more secure) methods to use...
#
#    2018-004-20 - Alisha Awen Sheppard - siren1@disroot.org
#      (prepared for public use - generic)
## ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
## default key
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

##
# The default key to sign with. If this option is not used, the default key
# is the first key found in the secret key ring... Use a signing sub-key
# rather than your primary key.  Qubes Split GPG does not expose your
# primary secret key to the light of day... Never take it out while
# connected on line... You won't need to take it out much as your
# sub-keys can be delegated to perform most of the work...
# (replace with your signing sub-key [S] fingerprint)
# NOTE: You can apply this multiple times for more than one key.  In this
#       case, the last key for which a secret key is available is used.
default-key 0x00005555AAAAFFFF00005555AAAAFFFF00005555

##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
## algorithm and ciphers
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

##
# Compression Utilities:
personal-compress-preferences ZLIB BZIP2 ZIP

##
# List of personal cipyer preferences:
# When multiple digests are supported by all recipients, choose the strongest one.
personal-cipher-preferences AES256 CAMELLIA256 AES192 AES CAMELLIA192 TWOFISH

##
# List of personal digest preferences:
# When multiple ciphers are supported by all recipients, choose the strongest one.
personal-digest-preferences SHA512 SHA384 SHA256 SHA224

##
# This preference list is used for new keys and becomes the default for
# "setpref" in the edit menu...
default-preference-list SHA512 SHA384 SHA256 SHA224 AES256 AES192 AES CAST5 ZLIB BZIP2 ZIP Uncompressed

##
# Message digest algorithm used when signing a key:
cert-digest-algo SHA512
s2k-digest-algo SHA512
s2k-cipher-algo AES256


##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
## general behavior
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

##
# How to Display key IDs:
# "none" omits the short ID and instead shows the key's full fingerprint on a 
# separate line.  "0xlong" displays the longer more accurate 16-char key ID.
# I choose "0xlong For practical reasons of searching keys etc., but I always
# confirm the actual "fingerprint" of someone's key before importing it!
keyid-format 0xlong

# Always show full fingerprints of keys List, (all keys or the specified ones)
with-fingerprint
with-keygrip

##
# If you do not use the Latin-1 (ISO-8859-1) charset, you should tell GnuPG which
# is the native character set.  Please check the man page for supported character
# sets.  This character set is only used for metadata and not for the actual
# message which does not undergo any translation.  Note that future version of
# GnuPG will change to UTF-8 as default character set.
#
# TODO: Find out if this needs to be set now that you are using
#       GnuPG > 2.2.x)
charset utf-8

##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
## VALID and important keyserver Options:
##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

##
#  --honor-pka-record:
#  If --auto-key-retrieve is used (an obsolete feature now), and the signature 
#  being verified has a PKA record, then use the PKA info to fetch the key.
#  This is the default enabled option for GPG2!  I am opting to disable it here 
#  for tighter security.  My configuration uses: pool.sks-keyservers.net to 
#  retrieve keys...  keyserver-options auto-key-retrieve is now obsolete so you
#  don't have to worry about disablig that anymore...
keyserver-options no-honor-pka-record

##
# Automatic key location - Locate a key using what has been defined by the
# --kyeyserver option within dirmngr.conf - Again, this back end vault is not
# connected (air-gapped) so dirmngr.conf is a no-op here. These options are
# for the App VM side of things... Therefore his option is a dummy here as well.
auto-key-locate keyserver

